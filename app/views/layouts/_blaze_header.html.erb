<div id="session_info" ng-show="info">

  <div id="session_info_slide" ng-show="info.session.show_panel">
    <div id="session_info_content" class="subtitle">

      <div class="session-current-history" ng-show="history_available()">
        <div class="current-box">
          {{'nouns.current_entity' | translate:{count: 1} }}
          <div class="hr"></div>
          <div class="kor-entity">
            <div kor-entity-widget="current_entity()"></div>
          </div>
        </div>

        <div class="previous-current-box">
          {{'nouns.previous_current_entity' | translate:{count: 'other'} }}
          <div class="hr"></div>
          <div ng-repeat="entity in previous_current_entities()" class="item">
            <a kor-to-current="true" href="#">
              <div class="kor-entity">
                <div kor-entity-widget="entity"></div>
              </div>
            </a>
          </div>
        </div>

        <div class="clearfix"></div>
      </div>
    </div>
  </div>
  
  <div class="clip" ng-show="info.session.user && info.session.user.name != 'guest'">
    <table cellpadding="0px" cellspacing="0px">
      <tr>
        <td class="positioner"></td>
        <td class="left"></td>
        <td 
          class="commands center subtitle" 
          ng-click="toggle_session_panel()"
          ng-bind="'nouns.session' | translate"
        >
        </td>
        <td class="right"></td>
      </tr>
    </table>
  </div>
  
  <div class="clear_both"></div>

</div>

<div id="header">
  <div id="userinfo" class="highlighted_subtitle">
    <table>
      <tr>
        <td class="version_info">
          <strong>ConedaKOR</strong>
          <span ng-bind="'nouns.version' | translate"></span>
          <span ng-bind="info.info.version"></span>
        </td>
        <td ng-show="info.session.user">
          {{'logged_in_as' | translate | capitalize}}
          <span class="username" ng-hide="info.session.user.name != 'guest'">
            <a 
              href="/edit_self"
              ng-bind="info.session.user.display_name"
            ></a>
          </span>
          <span class="username" ng-hide="info.session.user.name == 'guest'" ng-bind="info.session.user.display_name"></span>
        </td>
        <td ng-show="info.session.user.name != 'guest'">
          <%= image_tag "vertical_dots.gif" %>
        </td>
        <td ng-show="info.session.user.name != 'guest'">
          <a
            href='/logout'
            ng-bind="'verbs.logout' | translate | capitalize"
          >
          </a>
        </td>
      </tr>
    </table>
  </div>
  
  <%= link_to image_tag("logo.gif"), root_path %>
  <%= image_tag 'loading.gif', :id => 'ajax_loading_indicator', :style => 'display: none' %>
</div>
